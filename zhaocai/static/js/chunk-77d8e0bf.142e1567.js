(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77d8e0bf"],{"162d":function(e,t,a){"use strict";a("42a8")},"42a8":function(e,t,a){},a434:function(e,t,a){"use strict";var r=a("23e7"),n=a("23cb"),i=a("a691"),o=a("50c4"),l=a("7b0b"),s=a("65f0"),g=a("8418"),u=a("1dde"),c=a("ae40"),m=u("splice"),d=c("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,f=Math.min,h=9007199254740991,b="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!m||!d},{splice:function(e,t){var a,r,u,c,m,d,v=l(this),S=o(v.length),k=n(e,S),w=arguments.length;if(0===w?a=r=0:1===w?(a=0,r=S-k):(a=w-2,r=f(p(i(t),0),S-k)),S+a-r>h)throw TypeError(b);for(u=s(v,r),c=0;c<r;c++)m=k+c,m in v&&g(u,c,v[m]);if(u.length=r,a<r){for(c=k;c<S-r;c++)m=c+r,d=c+a,m in v?v[d]=v[m]:delete v[d];for(c=S;c>S-r+a;c--)delete v[c-1]}else if(a>r)for(c=S-r;c>k;c--)m=c+r-1,d=c+a-1,m in v?v[d]=v[m]:delete v[d];for(c=0;c<a;c++)v[c+k]=arguments[c+2];return v.length=S-r+a,u}})},dcdc:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card"},[a("el-form",{ref:"managerForm",attrs:{model:e.manager,rules:e.rules,"label-width":"80px","label-position":"top"}},[a("el-form-item",{attrs:{label:"网站标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入网站标题"},model:{value:e.manager.title,callback:function(t){e.$set(e.manager,"title",t)},expression:"manager.title"}})],1),a("el-form-item",{attrs:{label:"网站客服",prop:"service"}},[a("el-input",{attrs:{placeholder:"请输入客服QQ号，暂时只支持QQ客服"},model:{value:e.manager.service,callback:function(t){e.$set(e.manager,"service",t)},expression:"manager.service"}})],1),a("el-form-item",{attrs:{label:"网盘地址",prop:"disk"}},[a("el-input",{attrs:{placeholder:"请输入网盘地址"},model:{value:e.manager.disk,callback:function(t){e.$set(e.manager,"disk",t)},expression:"manager.disk"}})],1),a("el-form-item",[a("span",{staticStyle:{"margin-right":"20px"}},[a("b",[e._v("公告开关")])]),a("el-radio",{attrs:{label:"0"},model:{value:e.manager.gonggaoStatu,callback:function(t){e.$set(e.manager,"gonggaoStatu",t)},expression:"manager.gonggaoStatu"}},[e._v("开启")]),a("el-radio",{attrs:{label:"1"},model:{value:e.manager.gonggaoStatu,callback:function(t){e.$set(e.manager,"gonggaoStatu",t)},expression:"manager.gonggaoStatu"}},[e._v("关闭")])],1),a("el-form-item",[a("span",{staticStyle:{"margin-right":"20px"}},[a("b",[e._v("轮播图开关")])]),a("el-radio",{attrs:{label:"0"},model:{value:e.manager.imgStatu,callback:function(t){e.$set(e.manager,"imgStatu",t)},expression:"manager.imgStatu"}},[e._v("开启")]),a("el-radio",{attrs:{label:"1"},model:{value:e.manager.imgStatu,callback:function(t){e.$set(e.manager,"imgStatu",t)},expression:"manager.imgStatu"}},[e._v("关闭")])],1),a("el-form-item",{attrs:{label:"网站公告"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入公告内容,接受HTML样式"},model:{value:e.manager.gonggao,callback:function(t){e.$set(e.manager,"gonggao",t)},expression:"manager.gonggao"}})],1),a("el-form-item",{attrs:{label:"首页轮播图"}},[a("p",{staticStyle:{color:"red"}},[e._v("可以上传替换自己的首页图片,最多三张")]),a("el-upload",{ref:"upload",attrs:{action:e.imgUrl,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-success":e.upSuccess,"on-error":e.upError,limit:3,"on-exceed":e.outOfRange,"auto-upload":!1,accept:".jpg,.png",headers:e.headerObj,multiple:!0,disabled:e.uoloadImgDisabled,"on-change":e.uploadStatuChange}},[a("i",{staticClass:"el-icon-plus"}),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png图片,大小不超1MB,建议像素444x300 ")])]),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:"图片加载中..."}})])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存设置")]),a("el-button",{attrs:{type:"danger"},on:{click:e.reSetForm}},[e._v("重置")])],1)],1)],1)],1)},n=[],i=(a("498a"),a("a434"),a("e285")),o=a("5f87"),l={data:function(){var e=this,t=function(t,a,r){null==a||""===a.trim()?(e.manager.title="",r(new Error("标题不能为空"))):(e.manager.title=a.trim(),r())},a=function(t,a,r){null==a||""===a.trim()?(e.manager.service="",r(new Error("不能为空，请输入客户QQ号"))):(e.manager.service=a.trim(),r())},r=function(t,a,r){null==a||""===a.trim()?(e.manager.disk="",r(new Error("不能为空，请输入网盘地址，如蓝奏云链接"))):(e.manager.disk=a.trim(),r())};return{manager:{gonggaoStatu:"0",imgStatu:"0",title:""},imgUrl:window.api.BASE_URL+"/image/upload",dialogImageUrl:"",dialogVisible:!1,uoloadImgDisabled:!1,headerObj:{token:""},rules:{title:{validator:t,required:!0,trigger:"blur"},service:{validator:a,trigger:"blur"},disk:{validator:r,trigger:"blur"}}}},methods:{onSubmit:function(){var e=this;this.$refs.managerForm.validate((function(t){t?(e.updateManager(),e.$refs.upload.submit()):e.$message.error("请注意必填项!")}))},upSuccess:function(e,t,a){for(var r=t.uid,n=0;n<a.length;n++){var i=a[n];r===i.uid&&a.splice(n,1)}},reSetForm:function(){var e=this;this.$confirm("此操作将初始化数据，并且删除所有轮播图, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i["a"].getDefaultData().then((function(t){e.$message.success("重置成功，注意，所有已经上传的图片均已删除！"),e.getManager()}))})).catch((function(){e.$message({type:"info",message:"已取消重置"})}))},updateManager:function(){var e=this;i["a"].updateManager(this.manager).then((function(t){200===t.code&&(e.$message.success("基本信息保存成功！"),e.getManager())}))},getManager:function(){var e=this;i["a"].getManager().then((function(t){e.manager=t.data.manager}))},getToken:function(){this.headerObj.token=Object(o["b"])()},upError:function(){this.$message.error("图片上传失败")},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},outOfRange:function(){this.$message.error("抱歉，最多只能选择三张")},uploadStatuChange:function(e,t){var a=e.raw.type;return"image/jpeg"!=a&&"image/png"!=a?(t.length=t.length-1,void this.$message.error("抱歉，只能上传图片类型jpg或png!")):e.size>1048576?(t.length=t.length-1,void this.$message.error("抱歉，图片大小不能超过1MB!")):void 0}},created:function(){this.getManager(),this.getToken()}},s=l,g=(a("162d"),a("2877")),u=Object(g["a"])(s,r,n,!1,null,"a83d1ef4",null);t["default"]=u.exports},e285:function(e,t,a){"use strict";var r=a("b775");t["a"]={getList:function(e,t,a){return Object(r["a"])({url:"/code/listByPage",method:"get",params:{}})},getImageList:function(){return Object(r["a"])({url:"/image/list",method:"get"})},updateManager:function(e){return Object(r["a"])({url:"/manager/update",method:"post",data:e})},getDefaultData:function(){return Object(r["a"])({url:"/manager/defaultInfo",method:"get"})},getManager:function(){return Object(r["a"])({url:"/manager/baseInfo",method:"get"})},getTitle:function(){return Object(r["a"])({url:"/manager/title",method:"get"})}}}}]);