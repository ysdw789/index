(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a0999528"],{"085c":function(e,t,a){"use strict";a("643b")},"643b":function(e,t,a){},aa22:function(e,t,a){"use strict";var r=a("b775");t["a"]={getList:function(e,t,a,n){return Object(r["a"])({url:"/server/listByPage",method:"get",params:{currentPage:e,pageSize:t,keywordIP:a,keywordComment:n}})},getAllList:function(){return Object(r["a"])({url:"/server/list",method:"get"})},addServer:function(e){return Object(r["a"])({url:"/server/add",method:"post",data:e})},updateServer:function(e){return Object(r["a"])({url:"/server/update",method:"post",data:e})},getServerById:function(e){return Object(r["a"])({url:"/server/getServerById",method:"get",params:{serverId:e}})},delServerById:function(e){return Object(r["a"])({url:"/server/delServerById",method:"get",params:{serverId:e}})},synchronizationCustomer:function(){return Object(r["a"])({url:"/server/synchronizationCustomer",method:"get"})}}},b562:function(e,t,a){"use strict";var r=a("b775");t["a"]={getListByPage:function(e,t,a,n){return Object(r["a"])({url:"/app/listByPage",method:"get",params:{currentPage:e,pageSize:t,keyword:a,serverId:n}})},getList:function(){return Object(r["a"])({url:"/app/list",method:"post"})},addApp:function(e){return Object(r["a"])({url:"/app/add",method:"post",data:e})},delAppById:function(e){return Object(r["a"])({url:"/app/delAppById",method:"get",params:{appId:e}})},changeServer:function(e,t){return Object(r["a"])({url:"/app/updateServer",method:"post",data:{id:e,serverId:t}})}}},f82c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card"},[a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"应用名字"}},[a("el-input",{attrs:{placeholder:"应用名字查询"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),a("el-form-item",{attrs:{label:"服务器IP"}},[a("el-select",{staticStyle:{width:"165px"},attrs:{filterable:"",clearable:!0,placeholder:"可手动输入ip查找"},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},e._l(e.serverList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.ip,value:t.id,disabled:"1"==t.statu}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.ip))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.comment))])])})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchBtn}},[e._v("查询")])],1)],1)],1),a("el-card",{staticClass:"box-card"},[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.showAddAppDialog}},[e._v("新增应用")]),a("br"),a("br"),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tbaleLoading,expression:"tbaleLoading"}],staticStyle:{width:"100%"},attrs:{size:"small","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},"element-loading-text":"别着急先去抽根烟",stripe:!0,border:!0,data:e.tableData,height:"400","max-height":"500"}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:"应用名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#F581B1"}},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"serverId",label:"服务器",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini"},on:{change:function(a){return e.changeServer(t.row.id,t.row.serverId)}},model:{value:t.row.serverId,callback:function(a){e.$set(t.row,"serverId",a)},expression:"scope.row.serverId"}},e._l(e.serverList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.ip,value:t.id,disabled:"1"==t.statu}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.ip))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.comment))])])})),1)]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"创建日期",width:"200"}}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"margin-right":"6px"},attrs:{size:"mini"},on:{click:function(a){return e.showUpdateAppDialog(t.row.id)}}},[e._v(" 修改 ")]),e._v(" "),a("el-popconfirm",{attrs:{"confirm-button-text":"好的","cancel-button-text":"不用了",icon:"el-icon-info","icon-color":"red",title:"确定删除该应用吗？"},on:{onConfirm:function(a){return e.delApp(t.row.id)}}},[a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v(" 移除 ")])],1)]}}])})],1),a("br"),e.windowWidth>=750?a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,30,40],layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e(),e.windowWidth<=749?a("div",{staticClass:"block"},[a("el-pagination",{attrs:{small:"",layout:"total, prev, pager, next",total:e.totalCount},on:{"current-change":e.handleCurrentChange}})],1):e._e(),a("el-dialog",{attrs:{"close-on-press-escape":!1,"close-on-click-modal":!1,title:e.dialogTitle,visible:e.dialogVisible,width:e.windowWidth<=750?"85%":"30%"},on:{closed:function(t){return e.dialogClosed()},"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"addAppForm",attrs:{size:"small","status-icon":"","label-width":"90px",model:e.app,rules:e.rules}},[a("el-form-item",{attrs:{label:"应用名称:",prop:"name"}},[a("el-input",{attrs:{placeholder:"暂不支持修改"},model:{value:e.app.name,callback:function(t){e.$set(e.app,"name",t)},expression:"app.name"}})],1),a("el-form-item",{attrs:{label:"服务器:",prop:"serverId"}},[a("el-select",{attrs:{placeholder:"请选择所属服务器"},on:{change:e.serverListSelectChange},model:{value:e.app.serverId,callback:function(t){e.$set(e.app,"serverId",t)},expression:"app.serverId"}},e._l(e.serverList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.ip,value:t.id,disabled:"1"==t.statu}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.ip))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.comment))])])})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addOrUpdate}},[e._v("确 定")])],1)],1)],1)],1)},n=[],i=a("b562"),s=a("aa22"),l={mounted:function(){var e=this;window.onresize=function(){return function(){e.windowWidth=window.innerWidth}()}},data:function(){return{app:{},rules:{name:{required:!0,message:"应用名称必须填写",trigger:"blur"},serverId:{required:!0,message:"请选择所属服务器",trigger:"blur"}},serverList:[],selectValue:"",dialogTitle:"",dialogVisible:!1,tbaleLoading:!0,keyword:"",keywordComment:"",windowWidth:0,tableData:[],currentPage:1,pageSize:10,totalCount:0,totalPage:0}},methods:{handleSizeChange:function(e){this.pageSize=e,this.getAppList()},handleCurrentChange:function(e){this.currentPage=e,this.getAppList()},getServerList:function(){var e=this;s["a"].getAllList().then((function(t){e.serverList=t.data.serverList}))},getAppList:function(){var e=this;i["a"].getListByPage(this.currentPage,this.pageSize,this.keyword,this.selectValue).then((function(t){e.tbaleLoading=!1,e.tableData=t.data.appList,e.totalCount=t.data.totalCount,e.totalPage=t.data.totalPage,e.getServerList()})).catch((function(t){e.tbaleLoading=!1}))},showAddAppDialog:function(){this.dialogTitle="新增应用",this.dialogVisible=!0},showUpdateAppDialog:function(e){this.$message({message:"应用名称暂时不支持修改",type:"warning"})},searchBtn:function(){this.currentPage=1,this.getAppList()},addOrUpdate:function(){var e=this;this.$refs.addAppForm.validate((function(t){t&&(e.app.id?e.updateApp():e.addApp())}))},addApp:function(){var e=this;i["a"].addApp(this.app).then((function(t){e.dialogVisible=!1,e.$message({message:"添加成功",type:"success"}),e.getAppList()}))},updateApp:function(){alert("修改")},dialogClosed:function(){this.app={},this.$refs.addAppForm.clearValidate()},delApp:function(e){var t=this;i["a"].delAppById(e).then((function(e){t.$message({message:"删除成功",type:"success"}),t.getAppList()}))},changeServer:function(e,t){var a=this;this.$confirm("为应用选择新的服务器, 是否继续?","温馨提醒",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i["a"].changeServer(e,t).then((function(e){a.$message({type:"success",message:"变更成功!"})}))})).catch((function(){a.getAppList(),a.$message({type:"info",message:"已取消变更"})}))},serverListSelectChange:function(e){e&&this.$refs.addAppForm.clearValidate("serverId")}},created:function(){this.getAppList(),this.windowWidth=window.innerWidth}},o=l,c=(a("085c"),a("2877")),d=Object(c["a"])(o,r,n,!1,null,"0e5e9176",null);t["default"]=d.exports}}]);